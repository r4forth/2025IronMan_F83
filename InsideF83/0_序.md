# 第四版序言 Preface to the Fourth Edition

It is thirty years since F83 was first released by Mike Perry and Henry Laxen.  This book was out 
of print a long time ago.  Yet, I still receive requests for the printed copies.  The book was 
originally produce on a CP/M microcomputer, with a Diablo daisy wheel printer.  All the text 
was preserved, but the figures and tables could not be reproduced.  Earlier, I released an 
electronic edition with figures and tables scanned from the original book.  It was embarrassing, 
because it exceeded the 25 MB limit for email delivery, due to the scanned images.  I think it is 
probably time to do a better job, taking advantages of Microsoft Words with its fonts and 
formatting capabilities.  

自從 Mike Perry 和 Henry Laxen 首次發行 F83 以來，已經過去了 30 年。這本書早就絕版了。然而，我仍然收到印刷版的請求。這本書最初是在 CP/M 微電腦上製作的，帶有[Diablo 630菊花輪打印機](https://en.wikipedia.org/wiki/Diablo_630)。所有文字都被保留下來，但圖形和表格無法複製。早些時候，我發行了一個電子版，其中包含從原書中掃描的圖形和表格。這很尷尬，因為由於掃描的圖像，它超過了電子郵件傳送的 25 MB 限制。我認為可能是時候利用 Microsoft Words 的字體和格式化功能，做得更好。

I am using the 12 point Times New Roman font for all narration, and the 8 point Courier New 
font for all source code and documentation.  Code and documentation are presented in two 
columns.  Left column is for code and right column for documentation.  As the left column is 
generally 1.5 inches wide, I allow only 1 character space for each level of indentation.  It is hard 
to see the nested levels, but I think is adequate if you do want to inspect the code in detail. 

我將 12 點 Times New Roman 字體用於所有旁白，8 點 Courier New 字體用於所有源代碼和文件。程式碼和文件呈現在兩欄中。左欄用於代碼，右欄用於文件。由於左列通常為 1.5 英寸寬，因此我只允許每個縮排級別有 1 個字符空間。很難看到嵌套的級別，但我認為如果您確實想詳細檢查代碼，這已經足夠了。

The only significant modification is on the term of ‘words’.  In the original book, Forth 
commands were called Forth words, Forth definitions, and sometimes Forth commands.  Now I 
have decided to call things which are executed by the host computer machine instructions or just 
instructions.  What’s executed by the Virtual Forth Computer  are commands, which are mostly 
colon commands and code commands.  I think it is now very consistent in the narration.  
However, in the documentation, words and definitions are not changed.

唯一重大的修改是對「詞」的術語。在原書中，符式命令被稱為「符式詞、符式定義」，有時還被稱為符式命令。現在我決定將由主機機器指令或僅指令執行的東西稱為指令。虛擬符式語言計算機執行的是命令，主要是冒號命令和代碼命令。我認為現在在敘述中非常一致。但是，在文檔中，單詞和定義不會更改。


Many figures were listings produced by an old IBM PC which was sent to dump yard long ago.  I 
was extremely please that I could get the 8086 F83 v.2.10 to run in a small CMD window on my 
old desktop PC with Windows XP.  The listings were produce by redirecting text output to a file.  
F83 is still alive!  It reads and writes to a floppy disk in the A: drive.  Boy!  I am lucky that I 
keep this PC which still has a 3.5” floppy drive.  I almost threw it away, as it developed some 
intermittent disk problems. 

書中列出的許多程式碼是由一台很久以前被送到垃圾場的舊 IBM PC 製作。我非常高興我可以讓 8086 F83 v.2.10 在裝有 Windows XP 的舊桌上型 PC 的一個小 CMD 窗口中運行。這些清單是透過將文字輸出重新導向到檔案來產生的。F83 還活著！它讀取和寫入 A 磁碟機中的軟碟。男孩！我很幸運，我保留這台仍然有 3.5 英寸軟碟機的 PC。我差點把它扔掉，因為它出現了一些間歇性磁碟問題。


Seeing a working F83 system in front of me, it’s like seeing a good old friend coming back after 
30 years.  It makes me feel encourage, and gives me hope that this new edition of Inside F83 
may still be useful for some friends out there.  It will also save some trees.

看到一台正在運行的 F83 系統出現在我面前，就像看到一位好老朋友時隔 30 年回來一樣。這讓我感到鼓舞，也讓我希望這個新版本的 Inside F83 可能仍然對一些朋友有用。它還將拯救一些樹木。

C. H. Ting 

July 2013 
San Mateo, California 

# 第三版序言 Preface to the Third Edition  

It is almost eight years since F83 was first released by Mike Perry and Henry Laxen.  It has been 
widely distributed by many shareware and freeware distributors, as well as through many 
bulletin boards.  It also has found its way into many real applications and useful products.  
Although we have seen many better public domain Forth systems brought out over the years, F83 
still stands out because of its high quality and because it is available on three very popular 
microprocessors: 8080, 8086, and 68000. 

自從 Mike Perry 和 Henry Laxen 首次發布 F83 以來，已經快八年了。它已被許多共享軟體和免費軟體發行商以及許多公告板廣泛分發。它還進入了許多實際應用和有用的產品。儘管多年來我們已經看到許多更好的公共領域 Forth 系統問世，但 F83 仍然因其高品質而脫穎而出，因為它可以在三種非常流行的微處理器上使用：8080、8086 和 68000。

The quality of F83 is testified by the fact that over the years, we have found only one bug in the 
8086 F83 system (DOS Version 2.10).  This bug was discovered by Mike Yantis at Maxtor Corp.  
The ENTRY cell in the user area contains 90H (NOP) and E9H (JMP) when the task is asleep.  
E9H causes a jump to the next task, thus skipping the current task.  These two bytes are changed 
to CDH and 80H (INT 80) when the task is to be waken.  INT 80H wakes up this task when the 
CPU control is passed to the task.  This scheme works fine in most instances.  This mechanism 
falls apart only if the waking up routine is activated by an interrupt, and if the interrupt hits when 
the CPU just finishes executing the NOP (90H) instruction and is ready to execute the JMP (E9H) 
instruction.  Unfortunately, the waking up routine secretly changed E9H to 80H, whose behavior 
at this point is unpredictable and in most cases crashed the CPU.  The probability of this 
occurring is very small, only about once in 100,000 interrupts, which were enough to bother 
Mike Yantis.  Mike fixed this bug by choosing INT E9H to start the wakened tasks. 

F83 的品質證明了這一點，多年來，我們在 8086 F83 系統（DOS 2.10 版）中只發現了一個錯誤。這個錯誤是由邁拓(Maxtor)公司的 Mike Yantis 發現的。當作業處於睡眠狀態時，使用者區域中的 ENTRY 儲存格包含 90H （NOP） 及 E9H （JMP）。E9H 會導致跳轉到下一個任務，從而跳過當前任務。當任務要喚醒時，這兩個位元組會變更為 CDH 和 80H （INT 80）。INT 80H 會在 CPU 控制權傳遞給任務時喚醒此任務。此方案在大多數情況下運作良好。只有當喚醒常式由中斷啟動，並且當 CPU 剛剛完成執行 NOP （90H） 指令並準備好執行 JMP （E9H） 指令時，中斷才會失效。不幸的是，喚醒例程偷偷地將 E9H 更改為 80H，其此時的行為是不可預測的，並且在大多數情況下會導致 CPU 崩潰。這種情況發生的概率非常小，大約每 100,000 次中斷中只有一次，這足以讓 Mike Yantis 感到困擾。Mike 透過選擇 INT E9H 來啟動喚醒任務來修復此錯誤。

Discussing this bug in detail is meant to be a compliment to Mike Perry and Henry Laxen in their 
efforts producing the F83 system.  It took a bug of such a oblique nature to escape Mike and 
Henry's tight grips.

詳細討論這個錯誤是為了對 Mike Perry 和 Henry Laxen 在生產 F83 系統方面所做的努力的讚美。需要一隻如此傾斜的蟲子才能逃脫麥克和亨利的緊緊抓握。

I take this opportunity to revise the book and produce it using a laser printer.  I am always 
amazed at how a laser printer can transform lies into truth.  In spite of the laser, I like to give 
special thanks to Jay McKnight in reviewing the text and corrected many of my grammatical and 
technical errors. 

我藉此機會修改這本書並使用雷射印表機製作它。我總是對雷射印表機如何將謊言轉化為真相感到驚訝。儘管有雷射光，我還是要特別感謝傑伊·麥克奈特 （Jay McKnight） 審閱了文本並糾正了我的許多語法和技術錯誤。

F83 is one among the very few Forth systems which are useful while still understandable.  Inside 
F83 had helped many people gain the privilege to peek inside a fully functional Forth system.  I 
hope it will help you also.  Not just take a peek, but use it as a key and open a whole new field to 
yourself. 

F83 是極少數有用且仍然易於理解的 Forth 系統之一。F83 內部幫助許多人獲得了窺視功能齊全的 Forth 系統的特權。我希望它也能對你有所幫助。不僅僅是偷看，而是將其用作鑰匙，為自己打開一個全新的領域。


C. H. Ting 
June 1991 
San Mateo, California 


# 第二版序言 Preface to the Second Edition

After I implemented my first Forth system on a Data General Nova computer and got the 'OK' 
message, I went back home and told my wife:  "I just promoted myself from an applications 
programmer to a system programmer!"  I was so excited and my brain was so completely filled 
with the intricate details of the Forth fabric that the only way to get hold of myself was to dump 
everything on paper.  That was the Systems Guide to figForth.  I xeroxed it and brought a boxful 
to the then Northern California FIG meeting and it was sold out immediately.  Apparently I had 
struck a chord in the Forth community which was desperately in need of documentation and 
instruction on Forth internals. 


當我在 Data General Nova 計算機上實現了我的第一個 Forth 系統並收到「OK』消息後，我回到家告訴我的妻子：「我剛剛從應用程序程序員晉升為系統程序員！」我太興奮了，我的大腦完全充滿了符式織物的複雜細節，以至於控制自己的唯一方法就是把所有東西都倒在紙上。這就是 figForth 的系統指南。我用影印了原始碼，帶了一箱去參加當時的北加州 FIG 會議，它立即完銷。顯然，我在 Forth 社區引起了共鳴，該社群迫切需要有關 Forth 內部結構的文檔和指導。

I was fortunate that a polyForth on LSI-11 computer was available at work.  I tried to convince 
Forth, Inc. to publish a similar book on polyForth and obtained some support to proceed.  I sent a 
draft manual, titled Systems Guide to polyForth to Forth, Inc.  Somehow, Forth, Inc. decided not 
to publish or promote it, and had left it on their bookshelf.  I heard that it found its way into the 
underground Forth circle in Southern California.  PolyForth is concise and powerful, and it 
deserves better system documentation than what is provided.  I was very impressed as I went 
through it screen by screen.  I was delighted in picking a great mind, that of Chuck Moore 
himself.  It was like poetry.

我很幸運，工作中可以使用 LSI-11 計算機上的 polyForth。我試圖說服 Forth， Inc. 出版一本關於 polyForth 的類似書籍，並獲得了一些支持以繼續進行。我向 Forth， Inc. 發送了一份名為 PolyForth 系統指南的手冊草稿。不知何故，Forth， Inc. 決定不出版或推廣它，並將其留在他們的書架上。我聽說它進入了南加州的地下福斯圈。PolyForth 簡潔而強大，值得比所提供的更好的系統文檔。當我逐個屏幕瀏覽它時，我印象深刻。我很高興能選擇一位偉大的思想家，查克·摩爾本人的思想家。這就像詩歌一樣。

When Mike Perry and Henry Laxen released their public domain F83 system, I bought a listing 
to read.  It was a very worthy product, with lots of tools and utilities.  The best part is that it is 
complete with on-line documentation in the form of shadow screens.  I thought there was little 
for me to contribute.  As F83 was spreading wider, we started to hear more complaints about the 
difficulties in learning and using it.  I reached a conclusion that Forth screens are good medium 
for programming, but a screen is too small a window for viewing and learning a large Forth 
system, even with shadows.  In reading the source code, it is necessary to look at many screens at 
the same time, quickly moving from one screen to another while keeping everything in plain 
view.  We have all been conditioned to read things in the printed form, making the best use of our 
visual system with instant zooming and panning capability.  The visual system is very difficult to 
emulate with a 24 by 80 character screen.

當 Mike Perry 和 Henry Laxen 發布他們的公共領域 F83 系統時，我買了一個清單來閱讀。這是一個非常有價值的產品，有很多工具和實用程序。最好的部分是它以陰影屏的形式提供了在線文檔。我認為我沒有什麼可以貢獻的。隨著 F83 的傳播範圍越來越廣，我們開始聽到更多關於學習和使用它困難的抱怨。我得出的結論是，福斯螢幕是很好的編程媒介，但螢幕對於查看和學習大型福斯系統來說太小了，即使有陰影也是如此。在閱讀原始碼時，需要同時查看多個螢幕，快速從一個螢幕移動到另一個螢幕，同時保持所有內容清晰可見。我們都習慣於閱讀印刷形式的東西，充分利用我們的視覺系統和即時縮放和平移功能。視覺系統很難用 24 x 80 個字符的屏幕來模擬。

Then Wil Baden came to one of the FIG meetings and showed the completely sorted index of 
F83 words in all vocabularies.  I rushed to the front table and grabbed a copy of his handout with 
the index, which was the tool I needed to navigate through the F83 system.  With the help of the 
index, lots of midnight oil, and ignoring my wife's orders to clean up my room, I was able to 
rearrange the source code of F83 in a form more tangible to mortal souls.  Most of the work was 
simply rearranging the source code from the horizontal to the vertical format and fill the right 
hand side of the page with words taken from the shadow screens.  I collected related source code 
and present it in a logical sequence, which often does not coincide with the loading sequence of 
the source screens.  Once the code is ordered logically, you will find it is much easier to 
comprehend this very large and seemingly intimidating system. 

然後威爾·巴登 （Wil Baden） 來到其中一次 FIG 會議，展示了所有詞彙中 F83 單詞的完全排序索引。我衝到前桌，拿起一份帶有索引的講義，這是我瀏覽 F83 系統所需的工具。借助索引、大量的午夜油，以及無視妻子清理房間的命令，我能夠以對凡人靈魂更具體的形式重新排列 F83 的源代碼。大部分工作只是將源代碼從水平格式重新排列為垂直格式，並用從陰影屏幕中獲取的文字填充頁面的右側。我收集了相關的源代碼並按邏輯順序呈現，這通常與源屏幕的加載順序不重合。一旦代碼按邏輯排序，您會發現理解這個非常大且看似令人生畏的系統要容易得多。

F83 provides a very extensive and solid foundation for professional programmers to build 
application packages.  It is also a very useful source for beginners to learn Forth programming 
style and techniques.  Its problem, as in any large Forth system, is the fragmentation of functions in a multitude of words.  With more than 1000 words, it is very difficult to have a firm handle on 
F83.  However, functions a user needs to program a computer application or to use a computer 
application are not that many.  Once you are familiar with those top level utility words, you can 
dig into the underlying low level words and use them to build your own castles.  This book, I 
hope, will serve the purpose of showing you the power and the beauty behind the Forth language. 

F83 為專業程式設計師建立應用程式包提供了非常廣泛和堅實的基礎。對於初學者來說，它也是學習 Forth 程式設計風格和技術的非常有用的來源。與任何大型 Forth 系統一樣，它的問題是功能碎片化用很多詞。1000 多字，想要牢牢掌握 F83 是非常困難的。然而，使用者對電腦應用程式進行程式設計或使用電腦應用程式所需的功能並不多。一旦你熟悉了那些頂級實用詞，你就可以深入研究底層的低級詞，並用它們來建造自己的城堡。我希望這本書能夠向您展示福斯語言背後的力量和美麗。

We are all indebted to Mike Perry and Henry Laxen for releasing the F83 system into the public 
domain.  It certainly sets a higher standard for commercial Forth systems and forces Forth 
vendors to provide more powerful systems and better user support.  Anything less than F83 will 
not be acceptable anymore.  Thanks are also due to Dr. S. Y. Tang and Mr. John Peters for 
reading the manuscript and making numerous suggestions and corrections.  The Chinese brush 
painting on the covers was provided by my mother, Mrs. I-Jean Hwang Ting.  My father, Mr. C. 
W. Ting, was the editor and also managed the production of this book.  This is a traditional 
Chinese family business, small but efficient and very Forth-like. 

我們都感謝 Mike Perry 和 Henry Laxen 將 F83 系統發佈到公共領域。它無疑為商業 Forth 系統設定了更高的標準，並迫使 Forth 供應商提供更強大的系統和更好的用戶支持。任何低於 F83 的東西都將不再被接受。也要感謝鄧善堯博士和約翰·彼得斯先生閱讀手稿並提出許多建議和更正。封面上的中國毛筆畫是由我的母親黃婷夫人提供的。我的父親丁先生是編輯，也負責這本書的製作。這是一家傳統的中國家族企業，小而高效，非常有福斯風格。


C. H. Ting 
May 1985 
San Mateo, California 


